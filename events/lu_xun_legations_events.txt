###########################
# Philippines Events
###########################
# By PPsyrius
###########################

add_namespace = lu_xun
add_namespace = shanghai_revolution
add_namespace = shanghai_uprisings

country_event = { # Introduction
	id = shanghai_revolution.0
	immediate = { log = "[GetDateText]: [Root.GetName]: event phil.1" }
	title = "Strike Action!"
	desc = shanghai_revolution.0.desc
	picture = "GFX_report_event_student_protests"

	is_triggered_only = yes

	

	option = {
		name = "Prepare For the Worst"
		country_event = {
		id = shanghai_revolution.1
		days = 3
		}
	}
	
	
}

country_event = { # Introduction
	id = shanghai_revolution.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event phil.1" }
	title = "Growing Strikes"
	desc = shanghai_revolution.1.desc
	picture = "GFX_report_event_protests_grow"

	is_triggered_only = yes

	

	option = {
		name = "Call in Our Overlords"
		custom_effect_tooltip  = call_overlords_tt
	}
	
	option = {
		name = "Just Hire Local Gangs to Deal with Them"
		custom_effect_tooltip = legations_collapse_tt
		country_event = {
		id = shanghai_revolution.2
		days = 3
		}
	}
	
	
}

country_event = { # Introduction
	id = shanghai_revolution.2
	immediate = { log = "[GetDateText]: [Root.GetName]: event phil.1" }
	title = "Leader of the Strikes"
	desc = shanghai_revolution.2.desc
	picture = "GFX_report_event_picture_ku_xun_league"

	is_triggered_only = yes

	

	
	
	option = {
		name = "A Tiger in Plain Sight"
		custom_effect_tooltip = legations_collapse_tt
		country_event = {
		id = shanghai_revolution.3
		days = 3
		}
	}
	
	
}

country_event = { # Introduction
	id = shanghai_revolution.3
	immediate = { log = "[GetDateText]: [Root.GetName]: event phil.1" }
	title = "The Final Crack Breaks the Egg"
	desc = shanghai_revolution.3.desc
	picture = "GFX_Report_event_protest_7"

	is_triggered_only = yes

	

	
	
	option = {
		name = "Its Over"
		custom_effect_tooltip = legations_collapse_tt
		country_event = {
		id = lu_xun.1
		days = 3
		}
	}
	
	
}

country_event = { # Introduction
	id = lu_xun.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event phil.1" }
	title = "Lu Xun Takes Power in Shanghai"
	desc = lu_xun.1.desc
	picture = "GFX_report_event_picture_ku_xun_league"

	is_triggered_only = yes

	

	option = {
		name = "Huzzah For the Revolution!"
		custom_effect_tooltip = shanghai_revolution_tt
		hidden_effect = {
		set_global_flag = shanghai_revolution
		set_country_flag = peasant_revolution
		country_event = {
		id = lu_xun.2
		days = 100
		}
		remove_ideas = {
		LEC_currency_6
		LEC_volunteer_force
		
		}
		remove_ideas = {
		LEC_Du_Yuesheng_boss_sli
		LEC_Zhang_Xiaolin_boss_sli
		LEC_Huang_Jinrong_boss_sli
		}
		remove_all_ministers = yes
		set_politics = { ruling_party = radical_socialist }
		create_country_leader = {
			name = "Lu Xun"
			desc = "LU_XUN_DESC"
			picture = "gfx/leaders/LEC/Portrait_LEC_Lu_Xun.png"
			expire = "1936.11.19"
			ideology = lu_xun_thought_subtype
			}
		set_country_flag = shanghai_chaos
		set_country_flag = LEC_Triad_Power
		set_cosmetic_tag = LEC_LUXUN
		load_focus_tree = luxun-tree
		add_ideas = {
		LEC_support_from_unions_0
		LEC_raise_the_militias
		LEC_local_study_groups_0
		LEC_economic_recovery_0
		}
		add_ideas = {
		LEC_lu_xun_hog_rso
		LEC_yin_fu_eco_rso
		LEC_chen_jue_for_rso
		LEC_kang_sheng_sec_tot
		}
		set_popularities = {
		totalist = 40
		syndicalist = 10
		radical_socialist = 40
		social_democrat = 10
		social_liberal = 0
		market_liberal = 0
		social_conservative = 0
		authoritarian_democrat = 0
		paternal_autocrat = 0
		national_populist = 0
	}
		every_other_country = {
			limit = {
				OR = {
					has_guaranteed = LEC
					has_non_aggression_pact_with = LEC
					has_military_access_to = LEC
					gives_military_access_to = LEC
				}
			}
			diplomatic_relation = {
				country = FROM
				relation = guarantee
				active = no
			}
			diplomatic_relation = {
				country = FROM
				relation = non_aggression_pact
				active = no
			}
			diplomatic_relation = {
				country = FROM
				relation = military_access
				active = no
			}
			LEC = {
				diplomatic_relation = {
					country = PREV
					relation = military_access
					active = no
				}
			}
		}
		set_variable = {
				var = control_tianjin
				value = 25
			}
		set_variable = {
				var = control_hongkong
				value = 25
			}
		set_variable = {
				var = revolt_nanjing_nanjing
				value = 0
			}
		set_variable = {
				var = revolt_nanjing_jinhua
				value = 0
			}
		set_variable = {
				var = revolt_nanjing_huaisi
				value = 0
			}
		
		}
	}
	
	
}


country_event = { # Introduction
	id = lu_xun.2
	immediate = { log = "[GetDateText]: [Root.GetName]: event phil.1" }
	title = "Loss of a Hero"
	desc = lu_xun.2.desc
	picture = "GFX_report_event_LEC_lu_xun_dead"

	is_triggered_only = yes
	immediate  = {
	hidden_effect = {
	kill_country_leader = yes
	}
	}
	

	option = {
		name = "The Struggle Shall Begin"
		custom_effect_tooltip = power_struggle_after_lu_xun_tt
		hidden_effect = {
		add_ideas = {
		LEC_death_of_a_comrade
		}
		set_variable = {
				var = quibai_faction
				value = 0
			}
		set_variable = {
				var = creation_faction
				value = 0
			}
		set_variable = {
				var = agrarian_faction
				value = 0
			}
		set_variable = {
				var = student_faction
				value = 0
			}
		create_country_leader = {
					name = "Shanghai Communal Council"
					desc = "POLITICS_SHANGHAI_COUNCIL_DESC"
					picture = "gfx/leaders/CNH/Portrait_CNH_League of_Leftwing_Writers.png"
					expire = "1965.1.1"
					ideology = lu_xun_thought_subtype
					traits = {
					}
				}
		}
	}
	
	
}

country_event = { # Introduction
	id = shanghai_uprisings.0
	immediate = { log = "[GetDateText]: [Root.GetName]: event phil.1" }
	title = "Uprising in Nanjing"
	desc = shanghai_uprisings.0.desc
	picture = "GFX_report_event_LEC_shanghai_commune_uprising"

	is_triggered_only = yes
	
	

	option = {
		name = "The Thunder of Revolution Shall be Followed By the Lightning of Victory!"
		custom_effect_tooltip = units_will_launch_in_nanjing_tt
		hidden_effect = {
		if = {
		limit = {
		AND = {
			check_variable = { revolt_nanjing_nanjing > 3 }
			check_variable = { revolt_nanjing_jinhua > 3 }
			check_variable = { revolt_nanjing_huaisi > 3 }
			check_variable = { revolt_nanjing_nanjing < 6 }
			check_variable = { revolt_nanjing_jinhua < 6 }
			check_variable = { revolt_nanjing_huaisi < 6 }
			}
		}
		load_oob = "LEC - Shanghai Revolution Nanjing 1"
		
		}
		else_if = {
		limit = {
		AND = {
			check_variable = { revolt_nanjing_nanjing > 6 }
			check_variable = { revolt_nanjing_jinhua > 6 }
			check_variable = { revolt_nanjing_huaisi > 6 }
			check_variable = { revolt_nanjing_nanjing < 9 }
			check_variable = { revolt_nanjing_jinhua < 9 }
			check_variable = { revolt_nanjing_huaisi < 9 }
			}
		}
		load_oob = "LEC - Shanghai Revolution Nanjing 2"
		}
		else_if = {
		limit = {
		AND = {
			check_variable = { revolt_nanjing_nanjing > 9 }
			check_variable = { revolt_nanjing_jinhua > 9 }
			check_variable = { revolt_nanjing_huaisi > 9 }
			}
		}
		load_oob = "LEC - Shanghai Revolution Nanjing 3"
		}
		}
	}
	
	
}