

is_ruled_by_chinese_communists = {
	OR = {
		is_ruled_by_pro_communist
		is_ruled_by_communist
	}
}


is_ruled_by_communist = {
	OR = {
		tag = LEC # always
		# factions override all alignments
		AND = {
			is_in_faction_with = LEC
			NOT = { has_country_flag = united_front_member }
			LEC = { is_faction_leader = yes }
		}
		### if not in faction, check tag-specific conditions		
		AND = {
			OR = {
				is_in_faction = no
				is_faction_leader = yes
			}
			OR = {
				AND = {
					tag = GXC
					has_country_leader = {
						name = "Chen Mingshu"
						ruling_only = yes
					}
				}
				AND = {
					tag = SZC
					check_variable = { SZC_alliance = CHI }
				}
				AND = {
					tag = HNN
					has_government = totalist
				}
				AND = {
					tag = YUN
					has_government = syndicalist
					has_government = totalist
				}
				AND = {
					tag = SHX
					OR = {
						has_country_flag = SHX_alliance_CHI
						has_country_flag = CHI_SHX_Join_CHI
						CHI = { has_country_flag = CHI_Working_with_SHX }
					}
				}
			}
		}
		is_ruled_by_pro_communist = yes
	}
}


is_ruled_by_pro_communist = { #will side with either wing
	### only undecided if not already in faction
	OR = {
		is_in_faction = no
		is_faction_leader = yes
	}
	OR = {
		AND = {
			tag = HNN
			has_government = totalist
		}
		AND = {
			tag = XSM
			has_government = syndicalist
		}
		AND = {
			tag = YUN
			has_government = syndicalist
			has_government = totalist
		}
		AND = {
			tag = GXC
			has_government = syndicalist
			has_government = totalist
		}
		AND = {
			tag = SZC
			has_government = syndicalist
			has_government = totalist
		}
		AND = {
			tag = TIB
			has_government = syndicalist
		}
		AND = {
			tag = SIK
			has_country_leader = {
				name = "Sheng Shicai"
				ruling_only = yes
			}
		}
	}
}