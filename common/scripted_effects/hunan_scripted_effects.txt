HNN_kmt_variable_set = {

set_variable = {
    var = kmt_stage_one_suppression
    value = 17
}

set_variable = {
    var = kmt_stage_two_suppression
    value = 17
}
	
}

HNN_warlord_agitation = {
add_opinion_modifier = {
				target = QIE
				modifier = faction_traitor
			}
add_opinion_modifier = {
				target = SQI
				modifier = faction_traitor
			}
add_opinion_modifier = {
				target = LEP
				modifier = faction_traitor
			}
add_opinion_modifier = {
				target = ANQ
				modifier = faction_traitor
			}
add_opinion_modifier = {
				target = CHI
				modifier = faction_traitor
			}
add_opinion_modifier = {
				target = GXC
				modifier = faction_traitor
			}
add_opinion_modifier = {
				target = SZC
				modifier = faction_traitor
			}
add_opinion_modifier = {
				target = YUN
				modifier = faction_traitor
			}
add_opinion_modifier = {
				target = SHX
				modifier = faction_traitor
			}
add_opinion_modifier = {
				target = XSM
				modifier = faction_traitor
			}
add_opinion_modifier = {
				target = FNG
				modifier = faction_traitor
			}
add_opinion_modifier = {
				target = MON
				modifier = faction_traitor
			}	
add_opinion_modifier = {
				target = TAN
				modifier = faction_traitor
			}
add_opinion_modifier = {
				target = SIK
				modifier = faction_traitor
			}	
add_opinion_modifier = {
				target = ETS
				modifier = faction_traitor
			}
add_opinion_modifier = {
				target = TIB
				modifier = faction_traitor
			}			
}

TANG_KMT_SPIRIT = {
if = {
		limit = { has_idea = HNN_tridemism_1 }
		swap_ideas = {
		remove_idea = HNN_tridemism_1
		add_idea = HNN_tridemism_2
		}
		}
		else = {
		add_ideas = { HNN_tridemism_1 }
		}
}

HNN_recruit_general_effect = {
	if = {
		limit = {
			NOT = {
				PREV = { tag = HNN }
			}
		}
		if = {
			limit = { THIS = { is_army_leader = yes } }
			if = {
				limit = { is_field_marshal = yes }
				demote_leader = yes
			}
			remove_trait = { trait = recently_promoted }
		}
		set_nationality = HNN
	}
}
HNN_recruit_RCA_generals_effect = {
	hidden_effect = {
		XXA = {
			every_unit_leader = {
				limit = { has_unit_leader_flag = CHI_RCA_military_loyalist_flag }
				HNN_recruit_general_effect = yes
			}
		}
	}
}
HNN_recruit_PAC_generals_effect = {
	hidden_effect = {
		XXA = {
			every_unit_leader = {
				limit = { has_unit_leader_flag = CHI_PAC_military_loyalist_flag }
				HNN_recruit_general_effect = yes
			}
		}
	}
}
HNN_recruit_RF_generals_effect = {
	hidden_effect = {
		if = {
			limit = { NOT = { has_idea = CHI_nation_in_disarray_idea } }
			XXA = {
				random_unit_leader = {
					limit = { has_id = 2297 }
					HNN_recruit_general_effect = yes
				}
			}
		}
		BHC_chinese_advisers_flees = yes
		XXA = {
			random_unit_leader = {
				limit = { has_id = 2204 }
				HNN_recruit_general_effect = yes
			}
			random_unit_leader = {
				limit = { has_id = 2203 }
				HNN_recruit_general_effect = yes
			}
		}
		if = {
			limit = {
				ANQ = { has_unit_leader = 2272 }
			}
			ANQ = {
				random_unit_leader = {
					limit = { 
						has_id = 2272 
						has_unit_leader_flag = CHI_RF_military_loyalist_flag
					}
					HNN_recruit_general_effect = yes
				}
			}
		}
	}
}
HNN_recruit_LCS_generals_effect = {
	hidden_effect = {
		XXA = {
			every_unit_leader = {
				limit = { has_unit_leader_flag = CHI_LCS_military_loyalist_flag }
				HNN_recruit_general_effect = yes
			}
		}
	}
}
HNN_recruit_CRS_generals_effect = {
	hidden_effect = {
		XXA = {
			every_unit_leader = {
				limit = { has_unit_leader_flag = CHI_CRS_military_loyalist_flag }
				HNN_recruit_general_effect = yes
			}
		}
	}
}
