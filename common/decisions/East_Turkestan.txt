###########################
# ETS Decisions
###########################
# By Von_Laughing and WordZero
###########################

ETS_foreign_diplomacy = {

#	ETS_gain_international_recognition = {
#		icon = generic_agreement
#
#		allowed = {
#			tag = ETS
#		}
#
#		visible = {
#			has_global_flag = SIK_ETS_rebellion
#			is_subject = no
#		}
#
#		available = {
#			has_global_flag = ETS_rebellion_victory
#		}
#
#		ai_will_do = {
#			factor = 100
#		}
#
#		complete_effect = {
#			add_political_power = 20
#		}
#	}

	ETS_foreign_support_send_delgations_RUS = {
		icon = generic_agreement

		allowed = { always = no } #Activated from effect

		available = {
			has_equipment = {
				transport_plane_equipment_1 > 0
			}
		}

		cost = 5

		fire_only_once = yes

		ai_will_do = {
			factor = 100
		}

		days_remove = 5

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ETS_foreign_support_send_delgations_RUS"
			RUS = {
				country_event = { id = ets.2 }
			}
		}
	}

	ETS_foreign_support_send_delgations_DEH = {
		icon = generic_agreement

		allowed = { always = no } #Activated from effect

		cost = 5

		fire_only_once = yes

		ai_will_do = {
			factor = 100
		}

		days_remove = 5

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ETS_foreign_support_send_delgations_DEH"
			DEH = {
				country_event = { id = ets.3 }
			}
		}
	}

	ETS_foreign_support_send_delgations_OTT = {
		icon = generic_agreement

		allowed = { always = no } #Activated from effect

		available = {
			has_equipment = {
				transport_plane_equipment_1 > 0
			}
		}

		cost = 5

		fire_only_once = yes

		ai_will_do = {
			factor = 100
		}

		days_remove = 5

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ETS_foreign_support_send_delgations_OTT"
			OTT = {
				country_event = { id = ets.4 }
			}
		}
	}

	ETS_foreign_support_send_delgations_AFG = {
		icon = generic_agreement

		allowed = { always = no } #Activated from effect
		cost = 5
		fire_only_once = yes
		ai_will_do = {
			factor = 100
		}
		days_remove = 5

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ETS_foreign_support_send_delgations_AFG"
			AFG = {
				country_event = { id = ets.5 }
			}
		}
	}

	ETS_foreign_support_send_delgations_central_asia = {
		icon = generic_agreement

		allowed = { always = no } #Activated from effect
		cost = 5
		fire_only_once = yes
		ai_will_do = {
			factor = 100
		}
		days_remove = 5

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ETS_foreign_support_send_delgations_central_asia"
			FROM = {
				country_event = { id = ets.6 }
			}
		}
	}

	ETS_foreign_support_more_equipment_partial_support = { #need to ask everytime
		icon = generic_agreement

		allowed = {
			tag = ETS
		}

		visible = {
			has_global_flag = SIK_ETS_rebellion
			is_subject = no
			FROM = {
				exists = yes
				has_country_flag = {
					flag = ETS_partial_support
					days > 14
				}
			}
		}

		target_root_trigger = {
			has_completed_focus = ETS_seek_foreign_support
			OR = {
				has_war_with = SIK
				has_war_with = TAN
			}
			NOT = {
				has_global_flag = ETS_rebellion_victory
			}
		}
		target_array = ETS_foreign_country_array_partial_support
		target_trigger = {
			FROM = {
				has_country_flag = {
					flag = ETS_partial_support
					days > 14
				}
			}
		}

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ETS_foreign_support_more_equipment_partial_support target: [From.GetName]"
		}

		days_remove = 14
		days_re_enable = 14

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ETS_foreign_support_more_equipment_partial_support target: [From.GetName]"
			FROM = {
				country_event = { id = ets.11 }
			}
		}
	}

	ETS_foreign_support_more_equipment_full_support = {
		icon = generic_agreement

		allowed = {
			tag = ETS
		}

		visible = {
			has_global_flag = SIK_ETS_rebellion
			OR = {
				has_war_with = SIK
				has_war_with = TAN
			}
			NOT = {
				has_global_flag = ETS_rebellion_victory
			}
			is_subject = no
			FROM = {
				has_country_flag = {
					flag = ETS_full_support
					days > 7
				}
			}
		}

		target_root_trigger = {
			has_completed_focus = ETS_seek_foreign_support
			OR = {
				has_war_with = SIK
				has_war_with = TAN
			}
			NOT = {
				has_global_flag = ETS_rebellion_victory
			}
		}
		target_array = ETS_foreign_country_array_full_support
		target_trigger = {
			FROM = {
				has_country_flag = {
					flag = ETS_full_support
					days > 7
				}
			}
		}

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ETS_foreign_support_more_equipment_full_support target: [From.GetName]"
		}

		days_remove = 14
		#days_re_enable = 14 #more frequent than partial support

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ETS_foreign_support_more_equipment_full_support target: [From.GetName]"
			if = {
				limit = {
					has_completed_focus = ETS_construct_kashgar_hotan_highway #Better roads -> More rifles
				}
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = 200
					producer = FROM
				}
			}
			else = {
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = 100
					producer = FROM
				}
			}
			hidden_effect = { # create a loop
				if = {
					limit = {
						NOT = { has_global_flag = ETS_rebellion_victory }
					}
					activate_targeted_decision = {
						target = FROM
						decision = ETS_foreign_support_more_equipment_full_support
					}
				}
			}
		}
	}
}

ETS_war_economy = {

	ETS_convert_gold_to_currency = {
		icon = steel

		allowed = {
			tag = ETS
		}

		visible = {
			has_global_flag = SIK_ETS_rebellion
			is_subject = no
		}

		available = {
			has_global_flag = ETS_rebellion_victory
		}

		fire_only_once = yes

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ETS_convert_gold_to_currency"
			add_political_power = 20
			set_temp_variable = { temp1 = ETS_gold_amount }
			divide_temp_variable = { temp1 = 10 }
			round_variable = temp1
			if = {
				limit = {
					check_variable = { temp1 > 9.9 }
				}
				random_owned_state = {
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
				subtract_from_variable = { ETS_gold_amount = 100 }
				else = {
					custom_effect_tooltip = ETS_not_enough_gold_for_factory_tt
				}
			}
			set_country_flag = ETS_gold_to_currency_converted
		}
	}

	ETS_weekly_hotan_gold = {
		allowed = {
			tag = ETS
		}
		available = {
			NOT = {
				controls_state = 287
			}
		}
		activation = {
			has_completed_focus = ETS_hotan_gold
			controls_state = 287
			NOT = {
				has_country_flag = ETS_gold_to_currency_converted
			}
		}
		is_good = yes

		cancel_trigger = {
			has_country_flag = ETS_gold_to_currency_converted
		}

		days_mission_timeout = 7

		days_remove = 0

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout ETS_weekly_hotan_gold"
			custom_effect_tooltip = ETS_gold_hotan_weekly_tt
			add_to_variable = { ETS_gold_amount = 1.0 }
		}
	}
#Hotan Factory
	ETS_complete_hotan_conversion = {
		icon = generic_industry

		allowed = {
			tag = ETS
		}

		available = {
			has_country_flag = ETS_firearm_expert_hired
			has_country_flag = ETS_gunpowder_learned
			has_country_flag = ETS_mineral_processing_learned
		}

		ai_will_do = {
			factor = 100
		}

		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ETS_complete_hotan_conversion"
			custom_effect_tooltip = ETS_convert_hotan_tt
			set_country_flag = ETS_hotan_conversion_completed
			hidden_effect = {
				287 = {
					remove_building = {
						type = industrial_complex
						level = 1
					}
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}

	ETS_hire_firearm_expert_foreign = {
		icon = generic_prepare_civil_war

		allowed = {
			tag = ETS
		}

		visible = {
			NOT = {
				has_country_flag = ETS_hotan_conversion_completed
				has_country_flag = ETS_firearm_expert_hired
			}
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = "Not receiving help from [From.GetNameWithFlag] in other areas of the conversion process"
				NOT = {
					has_country_flag = ETS_conversion_help_@FROM
				}
			}
			custom_trigger_tooltip = {
				tooltip = "Not in the process of hiring a Firearms Expert"
				NOT = {
					has_country_flag = ETS_firearm_expert_hiring
				}
			}
		}

		target_root_trigger = {
			has_completed_focus = ETS_emergency_factory_conversion
			NOT = {
				has_country_flag = ETS_hotan_conversion_completed
				has_country_flag = ETS_firearm_expert_hired
			}
		}

		target_array = ETS_foreign_country_array_majors_yay

		ai_will_do = {
			factor = 100
		}

		cost = 5
		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ETS_hire_firearm_expert_foreign"
			set_country_flag = ETS_conversion_help_@FROM
			set_country_flag = ETS_firearm_expert_hiring
			custom_effect_tooltip = ETS_foreign_firearm_expert_hired_tooltip
		}

		days_remove = 5

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ETS_hire_firearm_expert_foreign"
			set_country_flag = ETS_firearm_expert_hired
			clr_country_flag = ETS_firearm_expert_hiring
			clr_country_flag = ETS_conversion_help_@FROM
		}
	}

	ETS_hire_firearm_expert_local = {
		icon = generic_prepare_civil_war

		allowed = {
			tag = ETS
		}

		visible = {
			NOT = {
				has_country_flag = ETS_hotan_conversion_completed
				has_country_flag = ETS_firearm_expert_hired
			}
			has_completed_focus = ETS_emergency_factory_conversion
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = "Not conducting other parts of the conversion process"
				NOT = {
					has_country_flag = ETS_conversion_help_@FROM
				}
			}
			custom_trigger_tooltip = {
				tooltip = "Not in the process of hiring a Firearms Expert"
				NOT = {
					has_country_flag = ETS_firearm_expert_hiring
				}
			}
		}

		ai_will_do = {
			factor = 100
		}

		cost = 5
		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ETS_hire_firearm_expert_local"
			set_country_flag = ETS_conversion_help_@FROM
			set_country_flag = ETS_firearm_expert_hiring
			custom_effect_tooltip = ETS_local_firearm_expert_hired_tooltip
		}

		days_remove = 30

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ETS_hire_firearm_expert_local"
			set_country_flag = ETS_firearm_expert_hired
			clr_country_flag = ETS_firearm_expert_hiring
			clr_country_flag = ETS_conversion_help_@FROM
		}
	}

	ETS_learn_gunpowder_foreign = {
		icon = generic_prepare_civil_war

		allowed = {
			tag = ETS
		}

		visible = {
			NOT = {
				has_country_flag = ETS_hotan_conversion_completed
				has_country_flag = ETS_gunpowder_learned
			}
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = "Not receiving help from [From.GetNameWithFlag] in other areas of the conversion process"
				NOT = {
					has_country_flag = ETS_conversion_help_@FROM
				}
			}
			custom_trigger_tooltip = {
				tooltip = "Not in the process of discovering Gunpowder Formula"
				NOT = {
					has_country_flag = ETS_gunpowder_learning
				}
			}
		}

		target_root_trigger = {
			has_completed_focus = ETS_emergency_factory_conversion
			NOT = {
				has_country_flag = ETS_hotan_conversion_completed
				has_country_flag = ETS_gunpowder_learned
			}
		}
		target_array = ETS_foreign_country_array_majors_yay

		ai_will_do = {
			factor = 100
		}

		cost = 5
		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ETS_learn_gunpowder_foreign"
			set_country_flag = ETS_conversion_help_@FROM
			set_country_flag = ETS_gunpowder_learning
			custom_effect_tooltip = ETS_foreign_gunpowder_tooltip
		}

		days_remove = 5

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ETS_learn_gunpowder_foreign"
			set_country_flag = ETS_gunpowder_learned
			clr_country_flag = ETS_gunpowder_learning
			clr_country_flag = ETS_conversion_help_@FROM
		}
	}

	ETS_learn_gunpowder_local = {
		icon = generic_prepare_civil_war

		allowed = {
			tag = ETS
		}

		visible = {
			NOT = {
				has_country_flag = ETS_hotan_conversion_completed
				has_country_flag = ETS_gunpowder_learned
			}
			has_completed_focus = ETS_emergency_factory_conversion
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = "Not conducting other parts of the conversion process"
				NOT = {
					has_country_flag = ETS_conversion_help_@FROM
				}
			}
			custom_trigger_tooltip = {
				tooltip = "Not in the process of discovering Gunpowder Formula"
				NOT = {
					has_country_flag = ETS_gunpowder_learning
				}
			}
		}

		ai_will_do = {
			factor = 100
		}

		cost = 5
		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ETS_learn_gunpowder_local"
			set_country_flag = ETS_conversion_help_@FROM
			set_country_flag = ETS_gunpowder_learning
			custom_effect_tooltip = ETS_local_gunpowder_tooltip
		}

		days_remove = 30

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ETS_learn_gunpowder_local"
			set_country_flag = ETS_gunpowder_learned
			clr_country_flag = ETS_gunpowder_learning
			clr_country_flag = ETS_conversion_help_@FROM
		}
	}

	ETS_learn_mineral_processing_foreign = {
		icon = generic_prepare_civil_war

		allowed = {
			tag = ETS
		}

		visible = {
			NOT = {
				has_country_flag = ETS_hotan_conversion_completed
				has_country_flag = ETS_mineral_processing_learned
			}
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = "Not receiving help from [From.GetNameWithFlag] in other areas of the conversion process"
				NOT = {
					has_country_flag = ETS_conversion_help_@FROM
				}
			}
			custom_trigger_tooltip = {
				tooltip = "Not in the process of discovering Gunpowder Formula"
				NOT = {
					has_country_flag = ETS_mineral_processing_learning
				}
			}
		}

		target_root_trigger = {
			has_completed_focus = ETS_emergency_factory_conversion
			NOT = {
				has_country_flag = ETS_hotan_conversion_completed
				has_country_flag = ETS_mineral_processing_learned
			}
		}

		target_array = ETS_foreign_country_array_majors_yay

		ai_will_do = {
			factor = 100
		}

		cost = 5
		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ETS_learn_mineral_processing_foreign"
			set_country_flag = ETS_conversion_help_@FROM
			set_country_flag = ETS_mineral_processing_learning
			custom_effect_tooltip = ETS_mineral_processing_tooltip
		}

		days_remove = 5

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ETS_learn_mineral_processing_foreign"
			set_country_flag = ETS_mineral_processing_learned
			clr_country_flag = ETS_mineral_processing_learning
			clr_country_flag = ETS_conversion_help_@FROM
			287 = {
				add_resource = {
					type = steel
					amount = 12
				}
			}
		}
	}

	ETS_learn_mineral_processing_local = {
		icon = generic_prepare_civil_war

		allowed = {
			tag = ETS
		}

		visible = {
			NOT = {
				has_country_flag = ETS_hotan_conversion_completed
				has_country_flag = ETS_mineral_processing_learned
			}
			has_completed_focus = ETS_emergency_factory_conversion
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = "Not conducting other parts of the conversion process"
				NOT = {
					has_country_flag = ETS_conversion_help_@FROM
				}
			}
			custom_trigger_tooltip = {
				tooltip = "Not in the process of discovering Gunpowder Formula"
				NOT = {
					has_country_flag = ETS_mineral_processing_learning
				}
			}
		}

		ai_will_do = {
			factor = 100
		}

		cost = 5
		fire_only_once = yes

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ETS_learn_mineral_processing_local"
			set_country_flag = ETS_conversion_help_@FROM
			set_country_flag = ETS_mineral_processing_learning
			custom_effect_tooltip = ETS_mineral_processing_tooltip
		}

		days_remove = 30

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ETS_learn_mineral_processing_local"
			set_country_flag = ETS_mineral_processing_learned
			clr_country_flag = ETS_mineral_processing_learning
			clr_country_flag = ETS_conversion_help_@FROM
			287 = {
				add_resource = {
					type = steel
					amount = 6
				}
			}
		}
	}
}

#Military
ETS_military_operation = {

	ETS_create_an_army = {
		icon = GFX_decision_generic_army_support

		allowed = {
			tag = ETS
		}

		fire_only_once = yes

		visible = {
			has_global_flag = SIK_ETS_rebellion
			is_subject = no
		}

		available = {
			has_global_flag = ETS_rebellion_victory
			#custom_trigger_tooltip = {
			#	tooltip = ETS_create_an_army_tt
			#	has_global_flag = ETS_rebellion_victory
			#	check_variable = { ETS_fledgling_military_army_morale_factor = 0 }
			#	check_variable = { ETS_fledgling_military_army_org_factor = 0 }
			#	check_variable = { ETS_fledgling_military_planning_speed = 0 }
			#	check_variable = { ETS_fledgling_military_max_planning = 0 }
			#	check_variable = { ETS_fledgling_military_army_attack_factor = 0 }
			#	check_variable = { ETS_fledgling_military_army_defence_factor = 0 }
			#	check_variable = { ETS_fledgling_military_recon_factor = 0 }
			#}
		}

		ai_will_do = {
			factor = 100
		}

		cost = 40

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ETS_create_an_army"
			set_country_flag = ETS_army_created
			remove_dynamic_modifier = {
				modifier = ETS_fledgling_military
			}
			army_experience = 25
		}
	}

	ETS_bughra_raise_militia = {
		icon = GFX_decision_generic_army_support

		allowed = {
			tag = ETS
		}

		visible = {
			NOT = {
				has_country_flag = ETS_army_created
			}
			SIK = {
				exists = yes
			}
			TAN = {
				exists = yes
			}
		}

		available = {
			controls_state = 287
			has_equipment = {
				infantry_equipment > 99
			}
			has_manpower > 4500
		}

		custom_cost_text = LEP_CP_25
		custom_cost_trigger = {
			command_power > 25
		}

		highlight_state_targets = {
			state = 287
		}

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ETS_bughra_raise_militia"
			add_manpower = -4500
			hidden_effect = {
				add_command_power = -25
			}
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = -100
			}
		}

		days_remove = 10

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ETS_bughra_raise_militia"
			custom_effect_tooltip = ETS_bughra_raise_militia_tt
			hidden_effect = {
				287 = {
					create_unit = {
						division = "name = \"Bughra's Militia\" division_template = \"Bughra's Militia\" start_experience_factor = 0.0 start_equipment_factor = 1.0"
						owner = ETS
						prioritize_location = 4973
					}
				}
			}
			ETS_bughra_pop_add_2 = yes
			add_to_variable = { ETS_fledgling_military_army_morale_factor = -0.02 }
			add_to_variable = { ETS_fledgling_military_army_org_factor = -0.01 }
			add_to_variable = { ETS_fledgling_military_army_attack_factor = -0.02 }
			add_to_variable = { ETS_fledgling_military_army_defence_factor = -0.02 }
			add_to_variable = { ETS_fledgling_military_recon_factor = -0.02 }
			force_update_dynamic_modifier = yes
		}
	}

	ETS_timur_raise_militia = {
		icon = GFX_decision_generic_army_support

		allowed = {
			tag = ETS
		}

		visible = {
			NOT = {
				has_country_flag = ETS_army_created
			}
			SIK = {
				exists = yes
			}
			TAN = {
				exists = yes
			}
		}

		available = {
			controls_state = 619
			has_equipment = {
				infantry_equipment > 99
			}
			has_manpower > 4500
		}

		custom_cost_text = LEP_CP_25
		custom_cost_trigger = {
			command_power > 25
		}

		highlight_state_targets = {
			state = 619
		}

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ETS_timur_raise_militia"
			add_manpower = -4500
			hidden_effect = {
				add_command_power = -25
			}
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = -100
			}
		}

		days_remove = 10

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ETS_timur_raise_militia"
			custom_effect_tooltip = ETS_timur_raise_militia_tt
			hidden_effect = {
				619 = {
					create_unit = {
						division = "name = \"Timur's Militia\" division_template = \"Timur's Militia\" start_experience_factor = 0.0 start_equipment_factor = 1.0"
						owner = ETS
						prioritize_location = 2015
					}
				}
			}
			ETS_timur_pop_add_2 = yes
			add_to_variable = { ETS_fledgling_military_army_morale_factor = -0.02 }
			add_to_variable = { ETS_fledgling_military_army_org_factor = -0.01 }
			add_to_variable = { ETS_fledgling_military_army_attack_factor = -0.02 }
			add_to_variable = { ETS_fledgling_military_army_defence_factor = -0.02 }
			add_to_variable = { ETS_fledgling_military_recon_factor = -0.02 }
			force_update_dynamic_modifier = yes
		}
	}

	ETS_army_training_adopt_formation_foreign = {
		icon = generic_prepare_civil_war

		allowed = {
			tag = ETS
		}

		visible = {
			check_variable = { ETS_fledgling_military_army_morale_factor < 0 }
			check_variable = { ETS_fledgling_military_army_org_factor < 0 }
			NOT = {
				has_country_flag = ETS_army_training_help_@FROM
				has_country_flag = ETS_army_created
			}
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = "Not receiving help from [From.GetNameWithFlag] in other areas of the training process"
				NOT = {
					has_country_flag = ETS_army_training_help_@FROM
				}
			}
			custom_trigger_tooltip = {
				tooltip = "Not in the process of adopting infantrty formations"
				NOT = {
					has_country_flag = ETS_army_adopt_formation_training
				}
			}
		}

		target_root_trigger = {
			has_completed_focus = ETS_army_training
			NOT = {
				has_country_flag = ETS_army_training_help_@FROM
				has_country_flag = ETS_army_created
			}
		}
		target_array = ETS_foreign_country_array_majors_yay

		ai_will_do = {
			factor = 100
		}

		cost = 20

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ETS_army_training_adopt_formation_foreign"
			set_country_flag = ETS_army_training_help_@FROM
			set_country_flag = ETS_army_adopt_formation_training
		}

		days_remove = 5

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ETS_army_training_adopt_formation_foreign"
			custom_effect_tooltip = ETS_army_training_adopt_formation_foreign_tt
			clr_country_flag = ETS_army_adopt_formation_training
			clr_country_flag = ETS_army_training_help_@FROM
			add_to_variable = { ETS_fledgling_military_army_morale_factor = 0.1 }
			add_to_variable = { ETS_fledgling_military_army_org_factor = 0.05 }
			clamp_variable = {
				var = ETS_fledgling_military_army_morale_factor
				min = -1
				max = 0
			}
			clamp_variable = {
				var = ETS_fledgling_military_army_org_factor
				min = -1
				max = 0
			}
			force_update_dynamic_modifier = yes
		}
	}

	ETS_army_training_adopt_formation_local = {
		icon = generic_prepare_civil_war

		allowed = {
			tag = ETS
		}

		visible = {
			has_completed_focus = ETS_army_training
			check_variable = { ETS_fledgling_military_army_morale_factor < 0 }
			check_variable = { ETS_fledgling_military_army_org_factor < 0 }
			NOT = {
				has_country_flag = ETS_army_created
			}
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = "Not conducting other parts of the training process"
				NOT = {
					has_country_flag = ETS_army_training_help_@FROM
				}
			}
			custom_trigger_tooltip = {
				tooltip = "Not in the process of adopting infantrty formations"
				NOT = {
					has_country_flag = ETS_army_adopt_formation_training
				}
			}
		}

		ai_will_do = {
			factor = 100
		}

		cost = 20

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ETS_army_training_adopt_formation_local"
			set_country_flag = ETS_army_training_help_@FROM
			set_country_flag = ETS_army_adopt_formation_training
		}

		days_remove = 30

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ETS_army_training_adopt_formation_local"
			custom_effect_tooltip = ETS_army_training_adopt_formation_local_tt
			clr_country_flag = ETS_army_adopt_formation_training
			clr_country_flag = ETS_army_training_help_@FROM
			add_to_variable = { ETS_fledgling_military_army_morale_factor = 0.05 }
			add_to_variable = { ETS_fledgling_military_army_org_factor = 0.025 }
			clamp_variable = {
				var = ETS_fledgling_military_army_morale_factor
				min = -1
				max = 0
			}
			clamp_variable = {
				var = ETS_fledgling_military_army_org_factor
				min = -1
				max = 0
			}
			force_update_dynamic_modifier = yes
		}
	}

	ETS_army_training_combat_techniques_foreign = {
		icon = generic_prepare_civil_war

		allowed = {
			tag = ETS
		}

		visible = {
			check_variable = { ETS_fledgling_military_army_attack_factor < 0 }
			check_variable = { ETS_fledgling_military_army_defence_factor < 0 }
			check_variable = { ETS_fledgling_military_recon_factor < 0 }
			NOT = {
				has_country_flag = ETS_army_training_help_@FROM
				has_country_flag = ETS_army_created
			}
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = "Not receiving help from [From.GetNameWithFlag] in other areas of the training process"
				NOT = {
					has_country_flag = ETS_army_training_help_@FROM
				}
			}
			custom_trigger_tooltip = {
				tooltip = "Not in the process of learning combat techniques"
				NOT = {
					has_country_flag = ETS_army_combat_techniques_training
				}
			}
		}

		target_root_trigger = {
			has_completed_focus = ETS_army_training
			NOT = {
				has_country_flag = ETS_army_training_help_@FROM
				has_country_flag = ETS_army_created
			}
		}
		target_array = ETS_foreign_country_array_majors_yay

		ai_will_do = {
			factor = 100
		}

		cost = 20

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ETS_army_training_combat_techniques_foreign"
			set_country_flag = ETS_army_training_help_@FROM
			set_country_flag = ETS_army_combat_techniques_training
		}

		days_remove = 5

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ETS_army_training_combat_techniques_foreign"
			custom_effect_tooltip = ETS_army_training_combat_techniques_foreign_tt
			clr_country_flag = ETS_army_combat_techniques_training
			clr_country_flag = ETS_army_training_help_@FROM
			add_to_variable = { ETS_fledgling_military_army_attack_factor = 0.1 }
			add_to_variable = { ETS_fledgling_military_army_defence_factor = 0.1 }
			add_to_variable = { ETS_fledgling_military_recon_factor = 0.1 }
			clamp_variable = {
				var = ETS_fledgling_military_army_attack_factor
				min = -1
				max = 0
			}
			clamp_variable = {
				var = ETS_fledgling_military_army_defence_factor
				min = -1
				max = 0
			}
			clamp_variable = {
				var = ETS_fledgling_military_recon_factor
				min = -1
				max = 0
			}
			force_update_dynamic_modifier = yes
		}
	}

	ETS_army_training_combat_techniques_local = {
		icon = generic_prepare_civil_war

		allowed = {
			tag = ETS
		}

		visible = {
			has_completed_focus = ETS_army_training
			check_variable = { ETS_fledgling_military_army_attack_factor < 0 }
			check_variable = { ETS_fledgling_military_army_defence_factor < 0 }
			check_variable = { ETS_fledgling_military_recon_factor < 0 }
			NOT = {
				has_country_flag = ETS_army_created
			}
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = "Not conducting other parts of the training process"
				NOT = {
					has_country_flag = ETS_army_training_help_@FROM
				}
			}
			custom_trigger_tooltip = {
				tooltip = "Not in the process of developing combat techniques"
				NOT = {
					has_country_flag = ETS_army_combat_techniques_training
				}
			}
		}

		ai_will_do = {
			factor = 100
		}

		cost = 20

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ETS_army_training_combat_techniques_local"
			set_country_flag = ETS_army_training_help_@FROM
			set_country_flag = ETS_army_combat_techniques_training
		}

		days_remove = 30

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove ETS_army_training_combat_techniques_local"
			custom_effect_tooltip = ETS_army_training_combat_techniques_local_tt
			clr_country_flag = ETS_army_combat_techniques_training
			clr_country_flag = ETS_army_training_help_@FROM
			add_to_variable = { ETS_fledgling_military_army_attack_factor = 0.05 }
			add_to_variable = { ETS_fledgling_military_army_defence_factor = 0.05 }
			add_to_variable = { ETS_fledgling_military_recon_factor = 0.05 }
			clamp_variable = {
				var = ETS_fledgling_military_army_attack_factor
				min = -1
				max = 0
			}
			clamp_variable = {
				var = ETS_fledgling_military_army_defence_factor
				min = -1
				max = 0
			}
			clamp_variable = {
				var = ETS_fledgling_military_recon_factor
				min = -1
				max = 0
			}
			force_update_dynamic_modifier = yes
		}
	}
	ETS_war_with_TAN = {
		icon = generic_political_discourse
		allowed = { tag = ETS }

		targets = { TAN }
		target_trigger = {
			is_neighbor_of = FROM
		}

		cost = 0
		fire_only_once = yes

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ETS_war_with_TAN target: [From.GetName]"
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}
	}
}
ETS_turkic_diplo_decisions = {
	ETS_reach_out_to_turkestan_khanate_decision = {
		icon = hol_exchange_intelligence_data

		allowed = {
			tag = ETS
		}
		visible = {
			tag = ETS
			TRK = {
				exists = yes
				is_subject = no
			}
		}

		cost = 10
		fire_only_once = yes

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ETS_reach_out_to_turkestan_khanate_decision"
			TRK = {
				country_event = {
					id = ets.53
					days = 1
				}
			}
		}
	}
	ETS_reach_out_to_alash_orda_decision = {
		icon = hol_exchange_intelligence_data

		allowed = {
			tag = ETS
		}
		visible = {
			tag = ETS
			ALO = {
				exists = yes
				is_subject = no
			}
		}

		cost = 10
		fire_only_once = yes

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ETS_reach_out_to_alash_orda_decision"
			ALO = {
				country_event = {
					id = ets.53
					days = 1
				}
			}
		}
	}
	ETS_reach_out_to_azerbaijan_decision = {
		icon = hol_exchange_intelligence_data

		allowed = {
			tag = ETS
		}
		visible = {
			tag = ETS
			AZE = {
				exists = yes
				is_subject = no
			}
		}

		cost = 10
		fire_only_once = yes

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ETS_reach_out_to_azerbaijan_decision"
			AZE = {
				country_event = {
					id = ets.53
					days = 1
				}
			}
		}
	}
	ETS_reach_out_to_ottoman_decision = {
		icon = hol_exchange_intelligence_data

		allowed = {
			tag = ETS
		}
		visible = {
			tag = ETS
			OTT = {
				exists = yes
				is_subject = no
			}
		}

		cost = 10
		fire_only_once = yes

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ETS_reach_out_to_ottoman_decision"
			OTT = {
				country_event = {
					id = ets.53
					days = 1
				}
			}
			set_country_flag = ETS_otto_reach_out_flag
		}
	}
	ETS_reach_out_to_turkey_decision = {
		icon = hol_exchange_intelligence_data

		allowed = {
			tag = ETS
		}
		visible = {
			tag = ETS
			TUR = {
				exists = yes
				is_subject = no
			}
		}

		cost = 10
		fire_only_once = yes

		ai_will_do = {
			factor = 100
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ETS_reach_out_to_turkey_decision"
			TUR = {
				country_event = {
					id = ets.53
					days = 1
				}
			}
		}
	}
	ETS_send_officers_to_train_in_otto_decision = {
		icon = generic_army_support

		allowed = {
			tag = ETS
		}
		visible = {
			tag = ETS
			OTT = {
				exists = yes
				is_subject = no
			}
			has_country_flag = ETS_otto_reach_out_flag
		}

		cost = 25
		fire_only_once = yes

		ai_will_do = {
			factor = 2
		}

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision ETS_send_officers_to_train_in_otto_decision"
			OTT = {
				country_event = {
					id = ets.54
					days = 1
				}
			}
		}
	}

}
